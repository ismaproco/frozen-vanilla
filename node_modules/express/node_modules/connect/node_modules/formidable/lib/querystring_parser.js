if (global.GENTLY) require = GENTLY.hijack(require);

// This is a buffering parser, not quite as nice as the multipart one.
// If I find time I'll rewrite this to be fully streaming as well
var querystring = require('querystring');

<<<<<<< HEAD
function QuerystringParser(maxKeys) {
  this.maxKeys = maxKeys;
=======
function QuerystringParser() {
>>>>>>> 37bc3d31dc01e2ffb149a7cf29dc44a6357559de
  this.buffer = '';
};
exports.QuerystringParser = QuerystringParser;

QuerystringParser.prototype.write = function(buffer) {
  this.buffer += buffer.toString('ascii');
  return buffer.length;
};

QuerystringParser.prototype.end = function() {
<<<<<<< HEAD
  var fields = querystring.parse(this.buffer, '&', '=', { maxKeys: this.maxKeys });
=======
  var fields = querystring.parse(this.buffer);
>>>>>>> 37bc3d31dc01e2ffb149a7cf29dc44a6357559de
  for (var field in fields) {
    this.onField(field, fields[field]);
  }
  this.buffer = '';

  this.onEnd();
<<<<<<< HEAD
};

=======
};
>>>>>>> 37bc3d31dc01e2ffb149a7cf29dc44a6357559de
